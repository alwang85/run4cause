<div id="event" class="header-padding">
    <h1 class="impactTitle">IMPACT MISSIONS</h1>
    <div class="col-xs-3">
        <a ng-if="currentUser" ui-sref="impactForm.create" class="btn btn-primary">Create Event Test</a>
    </div>
    <div class="eventList col-xs-6">
        <div class="eachEvent" ng-repeat="event in events">
            <div class="creatorBox">
                <img src="https://scontent-lga.xx.fbcdn.net/hphotos-xtp1/v/t1.0-9/10402536_848562865184461_80417573342618318_n.jpg?oh=6fcac3c583c855aa17ec55dcd30ccaaa&oe=560250B5">
            </div>
            <div class="participantsBox animated" ng-class="{'showBox slideInRight': event.showParticipants,'flipOutX hideBox': !event.showParticipants}">
                <div class="eachParticipant col-xs-12" ng-repeat="challenger in event.challengers | orderBy:'-individualProgress'" >
                    <div class="col-xs-6">
                        <img src="http://cdn.patch.com/assets/contrib/images/placeholder-user-photo.png">
                    </div>
                    <div class="col-xs-6">
                        <h6>{{challenger.user.email}}</h6>
                        <h6 class="participantsTitle">{{(challenger.individualProgress*100).toFixed(1)}}%</h6>
                    </div>
                </div>
            </div>
            <div class="oneRow col-xs-12">
                <h5 class="patientInfo">{{event.patient.name}} from {{event.patient.country}}</h5>
                <div class="info col-xs-8">
                    <div class="infoContainer">
                        <div class="seeStoryBtn">
                            <button class="btn btn-default"><a ui-sref="nonProfit.detail({nonProfitToken: event.patient.token})">Read Story</a></button>
                        </div>
                    </div>
                    <img src="{{event.patient.profilePic}}" />
                </div>
                <div class="mission col-xs-4">
                    <h3 class="missionTitle">MISSION</h3>
                    <div>
                        <img ng-if="currentEventMetrics(event).indexOf('distance')!==-1" src="http://www.pittsburghtriathlonclub.com/wp-content/uploads/2014/07/running.png">
                        <img ng-if="currentEventMetrics(event).indexOf('calories')!==-1" src="https://d13yacurqjgara.cloudfront.net/users/76939/screenshots/758710/flame-icon.png">
                        <img ng-if="currentEventMetrics(event).indexOf('steps')!==-1" src="http://upload.wikimedia.org/wikipedia/commons/thumb/0/04/Footsteps_icon.svg/1024px-Footsteps_icon.svg.png">
                        <h5>FROM {{event.startDate.slice(0,10)}}</h5>
                        <h5>TO {{event.endDate.slice(0,10)}}</h5>
                        <span>{{event.goals[1].metrics.target}}</span>
                        <span ng-if="currentEventMetrics(event).indexOf('distance')!==-1">miles</span>
                        <span ng-if="currentEventMetrics(event).indexOf('calories')!==-1">calories</span>
                        <span ng-if="currentEventMetrics(event).indexOf('steps')!==-1">steps</span>
                    </div>
                </div>
            </div>
            <div class="twoRow col-xs-12">
                <div class="col-xs-4">
                    <chart-box class="eventProgress" event='event'></chart-box>
                </div>
                <div class="eventInfo col-xs-8">
                    <h5>
                        <font-awesome class='quote' font="quote-left">
                        </font-awesome>
                        {{event.description.slice(0,100)}}
                        <font-awesome class='quote' font="quote-right">
                        </font-awesome>
                    </h5>
                    <h5>{{event.sponsor[0].user}}</h5>
                </div>
            </div>

            <div class="creatorFunctionalities btn-group btn-group-justified col-xs-12">
                <div class="btn-group" ng-if="event.creator._id===currentUser._id" role="group">
                    <button class='btn btn-default' ui-sref="impactForm.edit({ eventID : event._id })">edit</button>
                </div>
                <div class="btn-group"  ng-if="event.creator._id===currentUser._id" role="group">
                    <button class='btn btn-default' ng-click="deleteEvent(event)">delete</button>
                </div>
                <div class="btn-group"  ng-if="!checkParticipation(event)" role="group">
                    <button class='btn btn-default' ng-click="joinEvent(event)">join</button>
                </div>
                <div class="btn-group"  ng-if="checkParticipation(event)" role="group">
                    <button class='btn btn-default' ng-click="leaveEvent(event)">leave</button>
                </div>
                <div class="btn-group"  role="group">
                    <button class='btn btn-default' ng-click="sponsorEvent(event)">sponsor</button>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xs-3">

    </div>
</div>
